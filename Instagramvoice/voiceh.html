<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Voice Comment</title>
<link rel="stylesheet" href="style.css">
</head>
<style>
    body {
    font-family: Arial, sans-serif;
    background: #f5f5f5;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 40px;
}

.comment-box {
    background: white;
    padding: 15px 20px;
    border-radius: 30px;
    display: flex;
    align-items: center;
    gap: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

#recordBtn {
    background: #ff3b5c;
    border: none;
    color: white;
    font-size: 22px;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    cursor: pointer;
}

#audioContainer {
    margin-top: 20px;
}

</style>
<body>

<div class="comment-box">
    <button id="recordBtn">ðŸŽ¤</button>
    <span id="status">Tap to record</span>
</div>

<div id="audioContainer"></div>

<script src="script.js"></script>
<script>
    let mediaRecorder;
let audioChunks = [];
let isRecording = false;

const recordBtn = document.getElementById("recordBtn");
const statusText = document.getElementById("status");
const audioContainer = document.getElementById("audioContainer");

recordBtn.addEventListener("click", async () => {
    if (!isRecording) {
        const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
        mediaRecorder = new MediaRecorder(stream);
        mediaRecorder.start();

        audioChunks = [];
        mediaRecorder.ondataavailable = e => audioChunks.push(e.data);

        statusText.innerText = "Recording...";
        recordBtn.innerText = "â¹ï¸";
        isRecording = true;

        mediaRecorder.onstop = () => {
            const audioBlob = new Blob(audioChunks, { type: "audio/webm" });
            const audioURL = URL.createObjectURL(audioBlob);

            const audio = document.createElement("audio");
            audio.controls = true;
            audio.src = audioURL;

            audioContainer.innerHTML = "";
            audioContainer.appendChild(audio);
        };

    } else {
        mediaRecorder.stop();
        statusText.innerText = "Tap to record";
        recordBtn.innerText = "ðŸŽ¤";
        isRecording = false;
    }
});

</script>
</body>
</html>
